import feedparser
from telegram import Bot
import time

# ØªÙˆÚ©Ù† Ø±Ø¨Ø§ØªØª Ø±Ùˆ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø°Ø§Ø±
TELEGRAM_TOKEN = '7420283992:AAHQFvJ_-JHHu8NuhkSm0noGQKwoBZxGh9s'

CHAT_ID = '@https://t.me/agbarsin_test'

# Ø¢Ø¯Ø±Ø³ RSS Ù…ÙˆØ±Ø¯Ù†Ø¸Ø±
RSS_URL = 'https://www.farsnews.ir/rss/politics'

# Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ ØªÚ©Ø±Ø§Ø±ÛŒ
sent_links = set()

# Ø³Ø§Ø®Øª Ø¨Ø§Øª
bot = Bot(token=TELEGRAM_TOKEN)

def check_rss():
    feed = feedparser.parse(RSS_URL)
    for entry in feed.entries:
        if entry.link not in sent_links:
            # Ø§Ø±Ø³Ø§Ù„ Ø®Ø¨Ø±
            message = f"ðŸ“° {entry.title}\n{entry.link}"
            bot.send_message(chat_id=CHAT_ID, text=message)
            sent_links.add(entry.link)

if __name__ == "__main__":
    while True:
        check_rss()
        time.sleep(60 * 1)
